Тема 3: Датчик влажности почвы + PolysLab
=========================================
Задание: разобрать принцип работы датчика влажности почвы.

Принцип работы
--------------
Датчик для измерения влажности почвы выполнен в виде вилки с двумя электродами, которыми погружается в грунт на расстояние до 40 мм. При подключении питания на электродах создаёться напряжение. Если почва сухая, её сопротивление велико и через датчик между электродами течёт слабый ток. Если земля влажная — её сопротивление становится меньше, а ток датчика между электродами соответственно увеличивается. По итоговому аналоговому сигналу можно судить о степени увлажнения почвы.

Максимальное напряжение на выходе S не превышает 75% от напряжения питания модуля V, т.е. сигнальный диапазон датчика равен:
::
  0–3,5 В при питании 5 В
  0–2 В при питании 3,3 В.
На показания датчика также влияют следующие факторы:
::
  Степень погружения датчика в почву.
  Тип почвы, её химические и физические свойства.
   Наличие и количество примесей в воде.
Электроды датчика покрыты золотом, чтобы предотвратить пассивную коррозию, когда он выключен. Избавиться от электролитической коррозии, вызванной протекающим током, невозможно, поэтому сенсор резистивного типа рекомендуется запитывать через силовой ключ. То есть, включать его только на время измерений, чтобы максимально продлить ресурс. В плане эксплуатации это доставляет неудобство, поэтому рекомендуем обратить внимания на ёмкостный датчик влажности почвы, который в силу своего исполнения не подвержен коррозии.
Датчик влажности почвы является аналоговым датчиком и подключается через блок аналоговых устройств (23) на плате расширения (Рисунок 29). На экран можно выводить показания, считываемые датчиком. На рисунке 30 показано подключение в живую.

.. figure:: images/Рисунок29.png
       :scale: 100%
       :align: center
       :alt: Рисунок 29

       Рисунок 29

.. figure:: images/Рисунок30.png
       :scale: 100 %
       :align: center
       :alt: Рисунок 30

       Рисунок 30
Чтобы поставить библиотеку для работы с платой, необходимо скачать архив с библиотекой jsar.zip по ссылке ``https://appliedrobotics.ru/?page_id=633``.

Далее требуется открыть Arduino IDE, перейти во вкладку Скетч -> подключить библиотеку -> Добавить zip библиотеку.

.. figure:: images/3.1.png
       :scale: 100 %
       :align: center
       :alt: 3.1
       

Далее необходимо выбрать архив с библиотекой

.. figure:: images/3.2.png
       :scale: 100 %
       :align: center
       :alt: 3.2
       

И нажать кнопку Open. После успешной установки библиотеки в нижней части интерфейса программы появится сообщение.

.. figure:: images/3.3.png
       :scale: 100 %
       :align: center
       :alt: 3.3
       

Задание: вывести на экран показания с датчика влажности почвы.
Решение: внизу находится код для вывода показателей на монитор компьютера. 

Данный код пишется в программе на языке С в Arduino IDE 
::
  #include <JsAr.h>   // Подключение библиотеки для работы с платой ESP.
   
  void setup() {
    JsAr.begin();   // Начинаем работу с платой ESP. Без этой строчки ничего работать не будет!
    pinMode(A0, INPUT);     // Устанавливаем пин A0 как вход. Serial.begin(115200); // Начинаем общение по сериал-порту.
  }
   
  void loop() {
    int tempData = analogRead(A0);  // Считываем аналоговый сигнал.
    int intData = map(tempData, 0, 2048, 0, 100);   // Преобразовываем сигнал из некоторых условных единиц в проценты.
    String stringData = String(intData);        // Преобразовываем данные в строку. Serial.println(stringData); // Выводим в сериал-порт.
    delay(100);
  }
PolusLab 
--------

Измерение электропроводности воды может быть полезным инструментом при поливе растений, особенно если вы занимаетесь сельским хозяйством или садоводством. Электропроводность воды, также известная как электрическая проводимость, связана с содержанием растворенных минералов и солей в воде. Это параметр, который может предоставить информацию о качестве воды и её способности доставлять питательные вещества растениям.
Высокая электропроводность воды может указывать на высокое содержание солей, что может быть вредно для растений. Слишком высокая солевая концентрация может вызвать ожоги листьев и затруднить поглощение воды растениями. Низкая электропроводность, напротив, может указывать на недостаток питательных веществ в воде.
Путем регулярного измерения электропроводности воды вы можете следить за качеством воды, которую используете для полива растений, и корректировать состав воды или режим полива, чтобы обеспечить оптимальные условия для роста и развития растений.
Для точных измерений электропроводности воды вы можете использовать специальные приборы, такие как электропроводимостные метры или солемеры.

Существует несколько важных факторов в управлении питанием и поливом растений – электропроводность, уровень pH и температура раствора. Для измерения данных характеристик существуют специальные приборы. С помощью солеметра вы без труда сможете измерить уровень содержания солей в воде (ppm).
Проводимость раствора – значение, которое отражает то, насколько раствор способен проводить электрический ток. Например, дистиллированная или де-ионизированная вода в целом вообще не проводит электрический ток, поэтому значение ЕС для такой воды равно нулю. 
 
Особенно в гидропонике очень важно следить и контролировать уровень pH и ЕС, так как это значительно влияет на рост и развитие растений. Если раствор обладает подходящим для растения значением ЕС, всасывание питательных веществ и транспортировка их ко всем клеткам растения будут обеспечены на должном уровне. Благодаря измерениям - легко понять получают ли ваши растения правильное питание, или же страдают от нехватки питательных вещест. Тем более, важно учитывать, что для разных растений требуется различный уровень ЕС/TDS и своя программа питания на каждый период жизни растения - вегетативный рост, цветение, плодоношение. 
При измерении EC важно помнить о том, что температура питательного раствора должна быть оптимальной, а также уровень рН должен находиться в допустимых пределах. Потребление питательных веществ растениями зависит от температуры - когда темперетура выше нормы, из растения воды испаряется больше, что провоцирует его на более активное поглощение воды. В итоге воды поглащается больше чем соли. При нормальной температуре поглощение влаги и солей примерно одинаково. 
 
Увеличение уровня ЕС говорит о том, что нужно добавить в раствор воды, так как слишком высока концентрация солей. Понижение этого же показателя более чем на 30% указывает на то, что каких-то элементов в растворе не хватает. Поскольку неизвестно, каких именно питательных элементов растению не хватает, то обычно гроверу проще заменить питательный раствор.

Единицы измерения

Электропроводность может измеряться с помощью ряда единиц измерения, но международным стандартом является ЕС с единицей измерения миллисименс или микросименс (в 1 миллисименсе содержится 1000 микросименсов). Важно помнить, что «полноценно сильным» раствор можно назвать при значении ЕС 2-2.5 миллисименса (2мСм/см). Иногда ЕС выражают в других единицах измерения, например, CF или TDS. CF, в сущности, это та же ЕС, но умноженная на 10. Поскольку в этом случае не нужна десятичная доля, в некоторых системах эта единица измерения предпочтительнее самой ЕС. TDS – общее число растворенных солей (от англ. Total dissolved salts), считается в частях на миллион (parts per million или ppm). Эта единица часто используется в США, причем для измерения этого значения используется тот же самый прибор, что и для измерения ЕС, просто в нем есть внутренний корректирующий фактор, который переводит единицы ЕС в TDS. И здесь есть свои неприятные особенности: в зависимости от производителя, корректирующие факторы в приборах различаются: некоторые используют фактор 500ppm на мСм/см, некоторые – 700 ppm.
 
На фото внизу, мы видим с вами подключенный датчик для измерения электропроводности

.. figure:: images/3.4.png
       :scale: 100 %
       :align: center
       :alt: 3.4
Лабораторная работа №1: Измерение электропроводности воды
---------------------------------------------------------
#.	Подготовка оборудования:
  * Датчик измерения электропроводности.
  * 3 мерных стакана.
  * 3 образца минеральной негазированной воды разных марок.
  * Дистиллированная вода.
#.	Разлив воды:
  * В каждый мерный стакан налейте одинаковое количество образца воды.
#.	Проверка теплицы и оборудования:
  * Убедитесь, что теплица и датчик в хорошем состоянии.
#.	Подключение датчика:
  * Подключите датчик электропроводности к теплице.
#.	Включение теплицы:
  * Включите теплицу.
#.	Проверка датчика:
  * Убедитесь, что датчик функционирует нормально.
#.	Измерение электропроводности:
  * Измерьте электропроводность каждого образца воды.
  * Перед каждым измерением промойте датчик дистиллированной водой.
#.	Запись результатов:
  * Запишите результаты измерений в таблицу.
#.	Выключение теплицы:
  * Выключите теплицу.
#.	Отключение датчика:
  * Отключите датчик электропроводности.
#.	Выводы:
  * Сделайте выводы на основе полученных результатов.

Лабораторная работа №2: Измерение электропроводности воды из бочка для полива
-----------------------------------------------------------------------------

#.	Подготовка оборудования:
  * Датчик измерения электропроводности.
  * 3 мерных стакана.
  * 3 образца воды из разных мест
  * Дистиллированная вода.
#.	Разлив воды:
  * Наполните каждый мерный стакан одинаковым количеством образцов воды.
#.	Проверка теплицы и оборудования:
  * Проверьте состояние теплицы и датчика.
#.	Подключение датчика:
  * Подключите датчик электропроводности к теплице.
#.	Включение теплицы:
  * Включите теплицу.
#.	Проверка датчика:
  * Убедитесь, что датчик функционирует нормально.
#.	Измерение электропроводности:
  * Измерьте электропроводность каждого образца воды.
  * Промойте датчик дистиллированной водой перед каждым измерением.
#.	Запись результатов:
  * Запишите результаты измерений в таблицу.
#.	Выключение теплицы:
  * Выключите теплицу.
#.	Отключение датчика:
  * Отключите датчик электропроводности.
#.	Выводы:
  * Сделайте выводы на основе полученных результатов.



